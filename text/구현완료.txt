//구현한것들
//1.연결보기 버튼을 없애고 자동으로 나타나도록(선 중복 방지) (clear)
//2.연결관리 에서 포트 더블 클릭시 그 포트와 연결되어 있는 모든 포트들이 파란색으로 바뀌는 함수 (clear)
//3.HOME 화면 제작 nodelist출력 nav출력. nav밑에 nodelist랑 생성 버튼만 있는 식으로설정 <select/>와 불량포트 해제<select/>가 뜨도록.
//4.노드 이름과 포트이름 글자 수 제한
//5.브릿지 되었을 시 주황색으로 바뀌면서
//6.노드이름 중복확인
//7.연결해제: 연결되어 있는 포트를 각각 하나씩 골랐을 때 그 두개가 연결되어 있는 지를 확인한 후 해제 / 우클릭으로 두개 선택후 해제 선택한게 다른 포트의 각각 하나씩이 아니거나 선택한 두개가 연결된 상태가 아니면 alert
//8.단지 선택한 포트 두개가 다 초록색이라고 이미 연결된 포트라고 alert가 뜨며 막는 것은 잘못된 로직, 반드시 연결정보 파일에 들어가서 연결된 포트인지 확인 후 alert를 해야된다.
//9.브릿지 수를 띄워줌
//10.포트 단자만 봐도 해당 노드 안에서 연결된 정보는 바로 파악 가능하도록.title로 브릿지 수 및 연결된 포트 정보 전시.
//11.비고나 용도가 칸을 초과했을 때 편리함을 위하여 마우스를 올려놓았을때 그 값이 보이게 설정.
//12.노드 삭제시 해당 노드를 반대노드로 가지는 포트들도 삭제 --> 노드 안에 포트들이 있을 경우 노드 삭제 불가능
//13.포트 삭제시 연결정보에 있는 해당 포트가 포함된 정보들도 삭제 --> 사용중인 포트가 있으면 포트삭제 불가능
//, 불량 포트를 설정할 때는 해당 포트에 아무런 연결도 되어있으면 안됨. 불량포트 설정 셀렉트에 연결되어 있지 않은 포트만 올리고 뷸량포트 해제 셀렉터에는 불량포트로 설정되어 있는 포트만 올린다.
//?id의 이름이 dir에 없으면 홈으로 이동
//반대노드 없이 포트 생성할때 막기
// 노드 안에서 검색
//연결선 보기
//연결관리에서 연결을 하고나서 리로드를 안한 메인 페이지를 저장하면 연결관리가 반영이 안된 상태로 저장되버린다. 하지만 연결정보 파일에는 저장이 되버린다. 연결또는 연결해제를 하고 저장을 하면 자동으로 메인화면도 리로드 해주는 기능. hash나 Ajax
//19.포트 용도나 비고 입력하고 저장할때 펼쳐져있는 상태면 접어서 저장.
//연결 정보들 json으로 변경
//반대 포트에서도 연한색으로 이쪽 연결이 없을시 반대편 연결 상태 및 불량 표시
//reference와 usage의 value와 title도 업데이트.
//using,bridge,disable,available의 요소가 업데이트 될때마다 해당 단자만 업데이트 하고 업데이트된 포트들의
백그라운드와 title을 바꿔준다.
//포트 선택을 각 단자마다 하나만 할 수 있게.(선택을 안했을 경우에는 alert)
//포트이름, 노드이름 중복 db로 가서 확인
//노드삭제, 포트삭제 전 확인창 DB로 가서 확인(만약 노드안에 포트가 있거나 사용중인포트 또는 반대편에서 사용중인 포트가 있으면 삭제안됨)
//불량포트 연결 막기(id를 disable로 바꿔버렷)
//연결된 포트 보기 파란색 문제있음 (sharenum까지 확인하는 걸로 해결)
//노드리스트 접었다 폈다하기
//3.포트 위치 바꾸기
//노드 생성시 노드 컬렉션에 포트 순서를 관리하는 doc 만들고
//포트 생성시 포트의 id를 배열에 push
//배열안에서 순서를 조정하고 배열 순서대로 포트를 show하기
//검색 범위 옵션 (현재노드, 전체노드)
//2.비고 또는 용도를 통해 검색하는 검색기능 만들기 / 전체 검색
-디자인
노드 생성 폼
//노드리스트 넓이 변하지 않게 (펼쳐보기를 할 수록 좁아짐)
용도 비고, title
//포트 삭제시 portorder에서 해당 sharenum삭제
// 포트 노드 이름 class 선택자에 영향안가게 제한. 숫자로 시작 안되고 특수문자 언더바빼고 제외
//노드 생성시 하위노드 설정하여 트리구조로 노드 보기 (생성시, 삭제시, newnodeform, newportform, nodelist...)
opp_usingport 비동기 반복 해결 - oppjson을 단순 배열이 아닌 객체로 만들어서 dbshow에서 해당 sharenum으로 접근.
(반복문에서 db콜백문을 만나서 비동기로 인해 db 작업이 미뤄질때 db에 들어간 변수는 살아있으나 건드릴 수 없고,
db 콜백문 안의 변수들을 활용해서 해결)

//연결한번에 보기 해결했다 드디어.
1. content 라는 객체를 만들어 모든 노드를 객체의 키로 하고 값을 배열로준다.
2. next라는 객체를 만든다
3.show_connect_first라는 프로미스 함수를 만들어서 타겟이 된 포트 정보를 먼저 content[노드이름]에 push하고
4. 타겟이 된 포트와 연결된 포트들의 정보를 next[포트 sharenum] = 포트정보 로 저장하고 content[노드이름]에 push한다.
5. show_connect_next라는 프로미스 함수를 만들어서 first의 content와 next를 파라미터로 받아오고(array로 묶어서, resolve이기 때문)
6. next객체를 반복문으로 돌린다. Object.keys로 next_sharenums를 만들어서.
7. 각각의 포트정보에 해당하는 포트와 연결된 포트가 해당 노드에서 있는지 db connectstat에서 확인하는데
8. db.collection을 만나면 비동기라 킵해뒀다가 나중에 하므로 db의 콜백함수의 result값에서 sharenum을 찾아
9. 위의 next객체에서 포트번호를 구해다주면 그걸로 connectstat을 찾는다.
10. ++count가 next_sharenums.length와 같아지면 비동기 반복문을 탈출하고,
11. 이때 new_next에 값이 들어 있으면 show_connect_next를 한번더 반복하고
12. 값이 없다면 거기서 끝.
1.
//1.연결 한번에 보기 : 노드에서 포트 더블 클릭시 해당 포트와 연결되 포트들을 노드별로 나누어 다 보여준다
//연결한번에 보기에서 연결된 포트들 용도 or 비고 전부 같게 하기 추가.
//FDF 디자인 넣기
//로그인 기능 계정 1. admin, 2. client client는 읽기와 검색만 가능.
//연결관리에서 반대노드가 2개 이상일 경우 2개 까지만 나타나개끔
(아니면 이미 포트 이름에서 제한을 두니까 반대노드는 굳이 사라지게 안하고 하나씩만할까)

// 홈, 연결관리 페이지 디자인 수정 버튼들, 홈에는 로그 아웃 버튼

3.
//에러 발생 후 서버 멈출시 복구하는 기능
pm2

4.
백업 mongodump,mongostore
